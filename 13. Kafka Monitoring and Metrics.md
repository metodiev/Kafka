## Kafka Monitoring and Metrics

### 1. Why Monitor Kafka?
Monitoring helps ensure Kafka cluster health, performance, and reliability. It enables early detection of issues and bottlenecks.


### 2. Key Metrics to Monitor

| Metric Category      | Important Metrics                                  | Description                                |
|----------------------|--------------------------------------------------|--------------------------------------------|
| **Broker Health**    | Offline partitions, Under-replicated partitions  | Indicates cluster stability                 |
| **Producer Metrics** | Request rate, Error rate, Latency                 | Shows producer throughput and errors       |
| **Consumer Metrics** | Lag, Throughput, Commit rate                       | Consumer progress and performance           |
| **Topic Metrics**    | Partition count, Message rate, Log size           | Topic throughput and storage consumption    |
| **Replication**     | ISR size, Replication latency                      | Health of data replication                   |


### 3. Tools for Monitoring
- **JMX (Java Management Extensions):** Kafka exposes metrics via JMX.
- **Prometheus & Grafana:** Collect and visualize Kafka metrics.
- **Kafka Manager:** UI tool for cluster management and monitoring.
- **Confluent Control Center:** Commercial tool with advanced monitoring features.


### 4. Example: Enable JMX on Kafka Broker
```bash
export KAFKA_JMX_OPTS="-Dcom.sun.management.jmxremote=true \
-Dcom.sun.management.jmxremote.local.only=false \
-Dcom.sun.management.jmxremote.authenticate=false \
-Dcom.sun.management.jmxremote.ssl=false \
-Djava.rmi.server.hostname=YOUR_BROKER_HOSTNAME \
-Dcom.sun.management.jmxremote.port=9999"
bin/kafka-server-start.sh config/server.properties
```